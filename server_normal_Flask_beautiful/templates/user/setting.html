{% extends "base.html" %}

{% block title %}
    My setting
{% endblock %}

{% block sidebar_panel %}
    <div class="panel">
        <div class="header">
            <span class="col_fade">个人信息</span>
        </div>
        <div class="inner">
            <div class="user_card">
                <a class="user_avatar" href="{{ url_for('user.user_detail', id=user.id) }}">
                    <img src="{{ user.user_image }}" title="{{ user.username }}"/>
                </a>
                <span class="user_name"><a class="dark"
                                           href="{{ url_for('user.user_detail', id=user.id) }}">{{ user.username }}</a></span>

                <div class="space clearfix"></div>
                <span class="signature">
                        “ {{ user.note }} ”
                    </span>
            </div>
        </div>
    </div>
    <div class="panel">
        <div class="inner">
            <a href="{{ url_for('tweet.new', token=token, board_id=bid) }}" class="create_topic_btn">
                <span class="span-success">写新推特</span>
            </a>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div class='panel'>
        <div class='header'>
            <ul class='breadcrumb'>
                <li><a href="{{ url_for('tweet.index') }}">主页</a><span class='divider'>/</span></li>
                <li class='active'>设置</li>
            </ul>
        </div>
        <div class='inner'>
            <form id='setting_form' class='form-horizontal' action="{{ url_for('user.user_update', token=token) }}"
                  method='post'>
                <input name="id" value="{{ user.id }}" type="hidden">
                <div class='control-group'>
                    <label class='control-label' for='name'>用户名</label>

                    <div class='controls'>
                        <input class='input-xlarge' id='name' name='username' size='30' type='text'
                               value="{{ user.username }}"/>
                    </div>
                </div>

                <div class='control-group'>
                    <label class='control-label' for='signature'>个性签名</label>

                    <div class='controls'>
                        <input class='input-xlarge' id='signature' name='note' size='30' type='text'
                                value="{{ user.note }}"/>
                    </div>
                </div>
                <div class='form-actions'>
                    <input type='submit' class='span-primary submit_btn' data-loading-text="保存中.." value='保存设置'/>
                </div>
            </form>
        </div>
    </div>
    <div class='panel'>
        <div class='header'>
            <span class='col_fade'>更改密码</span>
        </div>
        <div class='inner'>
            <form id='change_pass_form' class='form-horizontal'
                  action='{{ url_for('user.user_update', token=token) }}' method='post'>
                <input name="id" value="{{ user.id }}" type="hidden">
                <div class='control-group'>
                    <label class='control-label' for='old_pass'>当前密码</label>

                    <div class='controls'>
                        <input class='input-xlarge' type='password' id='old_pass' name='old_password' size='30'/>
                    </div>
                </div>
                <div class='control-group'>
                    <label class='control-label' for='new_pass'>新密码</label>

                    <div class='controls'>
                        <input class='input-xlarge' type='password' id='new_pass' name='password' size='30'/>
                    </div>
                </div>

                <div class='form-actions'>
                    <input type='submit' class='span-primary submit_btn' data-loading-text="更改中.." value='更改密码'/>
                </div>
            </form>
        </div>
    </div>
    <div class='panel'>
        <div class='header'>
            <span class='col_fade'>更改头像</span>
        </div>
        <div class='inner'>
            <form id='change_pass_form' class='form-horizontal' action='{{ url_for('user.add_img', token=token) }}'
                  enctype=multipart/form-data method='post'>
                <div class='control-group'>
                    <label class='control-label' for='old_pass'>上传头像</label>

                    <div class='controls'>
                        <input type=file class='input-xlarge' name='avatar'/>
                    </div>
                </div>

                <div class='form-actions'>
                    <input type='submit' class='span-primary submit_btn' data-loading-text="上传中.." value='上传'/>
                </div>
            </form>
        </div>
    </div>
{% endblock %}
